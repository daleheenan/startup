[build]
builder = "nixpacks"
buildCommand = "cd backend && npm install && npm run build"

[deploy]
startCommand = "cd backend && npm start"
healthcheckPath = "/health"
healthcheckTimeout = 100
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 10

# Environment variables to set in Railway dashboard:
# - DATABASE_PATH=/data/novelforge.db
# - ANTHROPIC_API_KEY=<your-api-key>
# - JWT_SECRET=<random-64-char-string>
# - OWNER_PASSWORD_HASH=<bcrypt-hash-of-password>
# - FRONTEND_URL=https://novelforge-web.up.railway.app
# - PORT=3001
# - NODE_ENV=production

# Mount the shared volume for database
# Configure in Railway dashboard:
# Volume name: novelforge_data
# Mount path: /data
